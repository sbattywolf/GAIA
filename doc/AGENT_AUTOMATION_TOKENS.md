# GAIA Automation Tokens (Exceptional Working Mode)

This document lists recommended automation tokens and their intended purpose for the GAIA repo's exceptional automation mode. These tokens are intended for short-term, opt-in automation only and should be rotated/removed after use.

Recommended tokens to create

- `AUTOMATION_GITHUB_TOKEN` — Primary repo-scoped automation token. Minimal scopes: `repo` (or fine-grained: `Repository contents: Read & Write`, `Issues: Read & Write`, `Pull requests: Read & Write`). Use for most repo-level automation tasks.

- `AUTOMATION_GITHUB_REPOSITORY` — Optional override for target repository in `owner/repo` format. Use this instead of environment variables that start with `GITHUB_`.

- `AUTOMATION_GITHUB_TOKEN_ORG` — Org-level automation token (only if org-level actions required). Minimal scopes: `admin:org` or fine-grained equivalent.

- `AUTOMATION_GITHUB_TOKEN_PAI` — Privileged automation identity for advanced tasks (use sparingly). Grants broader rights (e.g., repo admin) for emergency operations or batch history edits. Use only with explicit `CHECKPOINT_<n>.md` approval.

- `AUTOMATION_GITHUB_TOKEN_PAI_READONLY` — Read-only automation token for safe materialization runs (preferred when possible).

How to add tokens locally

- Preferred (encrypted store):

  ```powershell
  echo <token> | .\.venv\Scripts\python.exe scripts\secrets_cli.py set AUTOMATION_GITHUB_TOKEN -
  ```

- Alternative (local env for quick runs): create `.private/.env` with lines like:

  ```text
  AUTOMATION_GITHUB_TOKEN=ghp_xxx
  GITHUB_REPOSITORY=owner/repo
  ```

  Keep `.private/` ignored by git and restrict file permissions.

Agent and script updates

- Scripts prefer `AUTOMATION_GITHUB_TOKEN_PAI`, then `AUTOMATION_GITHUB_TOKEN`, then `AUTOMATION_GITHUB_TOKEN_ORG`, then `GITHUB_TOKEN`.
- `agents/github_sessions_sync.py` now checks the `AUTOMATION_GITHUB_TOKEN*` env vars.
- `scripts/create_pr_api.py` now includes `AUTOMATION_GITHUB_TOKEN_PAI` in the preference order.

Operational notes

- This is an exceptional mode: enabling automation tokens gives the agent authority to change GitHub state. Require a `CHECKPOINT_<n>.md` explicit approval before enabling write-mode in production.
- For the minisprint and testing, dry-run mode is used by default. Only enable non-dry runs after token provisioning and a brief review.

Rotation & revocation

- Rotate tokens after the sprint; remove unnecessary tokens immediately after use.
- Maintain a short rotation playbook in `doc/SECRETS_ROTATION.md` (or similar) and record rotation actions in `gaia.db` audit table.

***
Generated by agent on 2026-02-06
