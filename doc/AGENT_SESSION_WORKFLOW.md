# Agent Session Workflow — GitHub Projects Integration

This note describes a recommended approach for representing agent "sessions" (views/tables) via GitHub Projects while keeping `gaia.db` as the runtime authoritative store.

Principles
- Keep `gaia.db` as the single source of truth for runtime state and audit records.
- Use GitHub Projects (view/table) as a human-facing read-only UI materialization of session state.
- Make any remote, internet-enabled updater optional and approval-gated. Do not let remote updater become primary authority without explicit governance.

Recommended design
1. One-way sync: implement a read-only sync from `gaia.db` → GitHub Project (cards/rows). Store a `source: gaia` tag on each GitHub item.
2. Mapping: define a small mapping layer that maps `backlog` rows to Project fields (id, title, status, priority, estimate, link). Keep mapping config in `agents/config/github_sessions.yml` (non-secret).
3. Approvals & gating: require a `CHECKPOINT_<n>.md` approval before enabling any writer/updater that modifies GitHub or repo state. The updater must record audit rows into `gaia.db` for each remote action.
4. Secrets & auth: use environment or secret store (GitHub Actions secrets or local env) for tokens. Delegate updater should be opt-in (explicit config flag `ENABLE_REMOTE_UPDATER=false` by default).
5. Auditing: every sync run appends an audit event to the `audit` table with `trace_id`, `source`, `action`, `timestamp`, and `detail` (redacted as needed).

Mini-sprint plan (MINI-002)
- Day 1: design mapping, small schema doc, and create `agents/github_sessions_sync.py` scaffold (read-only). Validate with local `gaia.db` sample.
- Day 2: prototype sync to a test GitHub Project (requires token), add audit writes, and draft approval gating doc. Stop before enabling remote writes in production.

Operational checklist (before enabling remote writes)
- `CHECKPOINT_<n>.md` created and explicitly approved in repo.
- Secrets reviewed and rotated where necessary; no raw secrets committed.
- Audit and event logging verified for sync runs.
- Rollback plan documented (how to revert GitHub Project changes and how to disable updater).

Next actions (suggested)
- Scaffold `agents/github_sessions_sync.py` (read-only) and run locally to validate mapping.
- Draft the approval/gating design into `doc/GAIA_AGENT_REQUIREMENTS.md` or separate `CHECKPOINT` when ready to take write actions.

—
Generated by agent on 2026-02-06; intended as a short operational guide to support `TASK-009` / `TASK-010` / `MINI-002`.
